@model Municipal_services_app.Controllers.AdminRequestsController.AdminEditVm

@{
    Layout = null;
    ViewBag.Title = "Update Request Status";
}

<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title - Admin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <style>
        :root {
            --brand-dark: #1d3557;
            --brand-mid: #2a5298;
            --card-bg: rgba(255,255,255,0.98);
        }
        html,body{height:100%;}
        body {
            margin: 0;
            font-family: "Segoe UI", system-ui, -apple-system, "Helvetica Neue", Arial;
            background: linear-gradient(135deg, var(--brand-dark) 0%, var(--brand-mid) 100%);
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
            color: #0b1b2a;
            padding: 24px;
        }

        .center-wrap {
            max-width: 760px;
            margin: 24px auto;
        }

        .card {
            border: none;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 12px 40px rgba(6,20,40,0.35);
            background: var(--card-bg);
        }

        .card-header {
            background: linear-gradient(90deg, rgba(29,53,87,0.95), rgba(42,82,152,0.95));
            color: #fff;
            border-bottom: none;
            display:flex;
            align-items:center;
            gap:.75rem;
        }

        .card-header h4 { margin:0; font-weight:600; }

        .back-bar {
            display:flex;
            justify-content:space-between;
            align-items:center;
            gap: .75rem;
            margin-bottom: 12px;
        }

        .btn-back {
            background: transparent;
            color: #fff;
            border: 1px solid rgba(255,255,255,0.12);
            padding: .45rem .9rem;
            border-radius: .5rem;
        }

        .card-body { padding: 1.25rem; }

        .form-label.fw-semibold { font-weight:600; }

        /* small responsiveness */
       @@media (max-width: 576px) {
            body { padding: 12px; }
            .center-wrap { padding: 6px; }
        }
    </style>
</head>
<body>
    <div class="center-wrap">
        <div class="back-bar mb-3">
            <a class="btn btn-back" href="@Url.Action("Index", "AdminRequests")">
                <i class="fa-solid fa-arrow-left"></i> Back to Admin Index
            </a>

            <div>
                <form method="post" asp-controller="Account" asp-action="Logout" class="d-inline">
                    @Html.AntiForgeryToken()
                    <button type="submit" class="btn btn-back">
                        <i class="fa-solid fa-right-from-bracket"></i> Logout
                    </button>
                </form>
            </div>
        </div>

        <div class="card">
            <div class="card-header p-3">
                <i class="fa-solid fa-pen-to-square fa-lg"></i>
                <h4 class="ms-2">Update Request Status</h4>
            </div>

            <div class="card-body">
                <form asp-action="Edit" asp-controller="AdminRequests" method="post" novalidate>
                    @Html.AntiForgeryToken()
                    <input type="hidden" asp-for="RequestRef" />

                    <div class="mb-3">
                        <label class="form-label fw-semibold">Request Reference</label>
                        <input class="form-control" value="@Model.RequestRef" readonly />
                    </div>

                    <div class="mb-3">
                        <label asp-for="CurrentStatus" class="form-label fw-semibold">Current Status</label>
                        <input asp-for="CurrentStatus" class="form-control" readonly />
                    </div>

                    <div class="mb-3">
                        <label asp-for="NewStatus" class="form-label fw-semibold">New Status</label>
                        <select asp-for="NewStatus" class="form-select" aria-label="Select new status">
                            @foreach (var status in Model.AvailableStatuses)
                            {
                                <option value="@status" selected="@(status == Model.CurrentStatus ? "selected" : null)">@status</option>
                            }
                        </select>
                    </div>

                    <div class="d-flex justify-content-between align-items-center mt-4">
                        <a href="@Url.Action("Index","AdminRequests")" class="btn btn-outline-secondary">
                            <i class="fa-solid fa-arrow-left"></i> Cancel
                        </a>

                        <button type="submit" class="btn btn-primary">
                            <i class="fa-solid fa-floppy-disk me-1"></i> Save Changes
                        </button>
                    </div>
                </form>

                @if (TempData["AdminMsg"] != null)
                {
                    <div class="alert alert-info mt-3 mb-0">
                        @TempData["AdminMsg"]
                    </div>
                }
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>